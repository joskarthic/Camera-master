<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
</head>
<body>
<h1>Picture Feed</h1>
<input type="button" value="Camera">

<script src="cordova.js"></script>
<script src="jquery-2.0.3.min.js"></script>
<script type="text/javascript">
  
  function upload(imageURI) {
    alert(imageURI);

    var ft = new FileTransfer();
    var options = new FileUploadOptions();

    options.fileKey = "file";
    options.fileName = 'filename.jpg'; // We will use the name auto-generated by Node at the server side.
    options.mimeType = "images/jpeg";
    options.chunkedMode = false;
    options.params = new Object();
    //var headers={"Content-Type" : 'multipart/form-data; boundary=+++++'};
    //options.headers = headers;

    ft.upload(imageURI, "http://appnlogic.com/demo/uploads/",
      function (r) {
        alert("Code = " + r.responseCode + ": Response = " + r.response + ": Sent = " + r.bytesSent);
      },
      function (r) {
        alert("An error has occurred: Code = " + error.code + ':' + error.source + ':' + error.target);
      }, options);
  }

  // Take a picture using the camera or select one from the library
  function takePicture() {
    var options = {
      quality: 45,
      targetWidth: 1000,
      targetHeight: 1000,
      destinationType: Camera.DestinationType.FILE_URI,
      encodingType: Camera.EncodingType.JPEG,
      sourceType: Camera.PictureSourceType.CAMERA
    };

    navigator.camera.getPicture(
      function (imageURI) {
        upload(imageURI);
      },
      function (message) {
        // We typically get here because the use canceled the photo operation. Fail silently.
      }, options);
  }

  $('input').on('click', takePicture);
</script>
</body>
</html>
